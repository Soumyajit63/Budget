<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Budget Buddy</title>

  <!-- CSS -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@500;600;700&family=Open+Sans&display=swap" rel="stylesheet">
  <link href="css/bootstrap.min.css" rel="stylesheet">
  <link href="css/bootstrap-icons.css" rel="stylesheet">
  <link href="css/templatemo-topic-listing.css" rel="stylesheet">  
  <link href="css/tooplate-kool-form-pack.css" rel="stylesheet">
</head>

<body id="top">

  <main>
    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg">
      <div class="container">
        <a class="navbar-brand" href="index.html">
          <img src="images/logo-transparent-png.png" alt="Budget Buddy Logo" height="90" width="90">
        </a>

        <div class="d-lg-none ms-auto me-4">
          <a href="#top" class="navbar-icon bi-person smoothscroll"></a>
        </div>

        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
          <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarNav">
          <ul class="navbar-nav ms-lg-5 me-lg-auto">
            <li class="nav-item"><a class="nav-link click-scroll" href="#section_1">Home</a></li>
            <li class="nav-item"><a class="nav-link click-scroll" href="#section_2">Browse Topics</a></li>
            <li class="nav-item"><a class="nav-link click-scroll" href="#section_3">How it works</a></li>
            <li class="nav-item"><a class="nav-link click-scroll" href="#section_4">FAQs</a></li>
            <li class="nav-item"><a class="nav-link click-scroll" href="#section_5">Contact</a></li>
            <li class="nav-item"><a class="nav-link click-scroll" href="dashboard.html">Dashboard</a></li>
          </ul>
          <div class="d-none d-lg-block">
            <a href="login.html" class="btn login-btn">Login</a>
          </div>
        </div>
      </div>
    </nav>

    <!-- Hero Section -->
    <section class="hero-section d-flex justify-content-center align-items-center" id="section_1">
      <div class="container">
        <div class="row">
          <div class="col-lg-8 col-12 mx-auto">
            <h1 class="text-white text-center">Discover. Learn. Enjoy</h1>
            <h6 class="text-center">platform for creatives around the world</h6>
            <form method="get" class="custom-form mt-4 pt-2 mb-lg-0 mb-5" role="search">
              <div class="input-group input-group-lg">
                <span class="input-group-text bi-search" id="basic-addon1"></span>
                <input name="keyword" type="search" class="form-control" id="keyword" placeholder="Design, Code, Marketing, Finance ..." aria-label="Search">
                <button type="submit" class="form-control">Search</button>
              </div>
            </form>
          </div>
        </div>
      </div>
    </section>

    <!-- Featured Section -->
    <section class="featured-section">
      <div class="container">
        <div class="row justify-content-center">
          <div class="col-lg-4 col-12 mb-4 mb-lg-0">
            <div class="custom-block bg-white shadow-lg">
              <a href="topics-detail.html">
                <div class="d-flex">
                  <div>
                    <h5 class="mb-2">Web Design</h5>
                    <p class="mb-0">When you search for free CSS templates, you will notice that TemplateMo is one of the best websites.</p>
                  </div>
                  <span class="badge bg-design rounded-pill ms-auto">14</span>
                </div>
                <img src="images/topics/undraw_Remote_design_team_re_urdx.png" class="custom-block-image img-fluid" alt="">
              </a>
            </div>
          </div>

          <div class="col-lg-6 col-12">
            <div class="custom-block custom-block-overlay">
              <div class="d-flex flex-column h-100">
                <img src="images/businesswoman-using-tablet-analysis.jpg" class="custom-block-image img-fluid" alt="">
                <div class="custom-block-overlay-text d-flex">
                  <div>
                    <h5 class="text-white mb-2">Finance</h5>
                    <p class="text-white">Topic Listing Template includes homepage, listing page, detail page, and contact page. You can feel free to edit and adapt for your CMS requirements.</p>
                    <a href="topics-detail.html" class="btn custom-btn mt-2 mt-lg-3">Learn More</a>
                  </div>
                  <span class="badge bg-finance rounded-pill ms-auto">25</span>
                </div>
                <div class="social-share d-flex">
                  <p class="text-white me-4">Share:</p>
                  <ul class="social-icon">
                    <li class="social-icon-item"><a href="#" class="social-icon-link bi-twitter"></a></li>
                    <li class="social-icon-item"><a href="#" class="social-icon-link bi-facebook"></a></li>
                    <li class="social-icon-item"><a href="#" class="social-icon-link bi-pinterest"></a></li>
                  </ul>
                  <a href="#" class="custom-icon bi-bookmark ms-auto"></a>
                </div>
                <div class="section-overlay"></div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>
  </main>

  <!-- Login Check Script -->
<script>
  document.addEventListener("DOMContentLoaded", () => {
    const isLoggedIn = localStorage.getItem("isLoggedIn");
    const userName = localStorage.getItem("userName");
    const loginBtn = document.querySelector(".login-btn");

    if (isLoggedIn === "true" && userName && loginBtn) {
      loginBtn.textContent = userName; // 👈 Show name instead of "Login"
      loginBtn.classList.remove("login-btn");
      loginBtn.classList.add("btn-success");

      // Add logout on click
      loginBtn.addEventListener("click", () => {
        localStorage.removeItem("isLoggedIn");
        localStorage.removeItem("fullName");
        window.location.href = "login.html";
      });
    }
  });
</script>




            
  <!-- ✅ CHATBOT HTML -->
<!-- ✅ Chatbot HTML -->
<div class="chatbot-container position-fixed bottom-0 end-0 m-4" style="z-index: 1050; max-width: 350px;">
  <!-- Chatbot Box -->
  <div id="chatbot-card" style="display: none; background-color: #ffffff; border-radius: 20px; overflow: hidden;">
    <div style="background-color: #007bff; color: white; display: flex; justify-content: space-between; align-items: center; padding: 10px; border-top-left-radius: 20px; border-top-right-radius: 20px;">
      <div style="display: flex; align-items: center;">
        <img src="images/logo-transparent-png.png" alt="Logo" style="height: 45px; margin-right: 10px;">
        <span><strong>Budget Bot</strong></span>
      </div>
      <button onclick="toggleChat()" style="background: none; border: none; color: white; font-size: 18px;">−</button>
    </div>
    <div id="chat-body" style="height: 250px; overflow-y: auto; padding: 10px; background-color: #f9f9f9;"></div>
    <div style="padding: 8px; border-top: 1px solid #ddd;">
      <form onsubmit="sendMessage(event)">
        <div style="display: flex;">
          <input type="text" id="chat-input" placeholder="Type a message..." style="flex: 1; padding: 6px; border-radius: 12px; border: 1px solid #ccc;" autocomplete="off">
          <button type="submit" style="margin-left: 6px; background-color: #007bff; color: white; border: none; border-radius: 12px; padding: 6px 14px;">Send</button>
        </div>
      </form>
    </div>
  </div>

  <!-- Video Toggle Button -->
  <button id="chat-toggle-button" onclick="toggleChat()" style="position: absolute; bottom: 0; right: 0; background: none; border: none; padding: 0; margin: 0; display: none; cursor: pointer;">
    <video autoplay loop muted playsinline disablepictureinpicture style="width: 150px; border-radius: 120%; pointer-events: none;">
      <source src="videos/chat-bot.mp4" type="video/mp4">
    </video>
  </button>
</div>

 
<!-- ✅ Chatbot Script -->
<script>
  let botMessages = [
    "Hi! I'm your Budget Bot 🤖",
    "What can I help you with today?",
    "What do you need help budgeting for?",
    "How much money do you have to work with?",
    "Do you have a savings goal in mind?"
  ];
  let botIndex = 0;
  let autoOpenTimer;
  let autoCloseTimer;

  window.addEventListener("DOMContentLoaded", () => {
    const card = document.getElementById("chatbot-card");
    const toggleBtn = document.getElementById("chat-toggle-button");

    // Hide chatbot initially
    card.style.display = "none";
    toggleBtn.style.display = "block";

    // ⏱ Open after 5 minutes (300000 ms)
    autoOpenTimer = setTimeout(() => {
      openChatbot();
    }, 300000);
  });

  function openChatbot() {
    const card = document.getElementById("chatbot-card");
    const toggleBtn = document.getElementById("chat-toggle-button");
    const chatBody = document.getElementById("chat-body");

    card.style.display = "block";
    toggleBtn.style.display = "none";

    // Auto send first bot message sequence
    if (botIndex === 0) {
      showNextBotMessage();
    }

    // Auto-close after 5 mins
    autoCloseTimer = setTimeout(() => {
      card.style.display = "none";
      toggleBtn.style.display = "block";
    }, 300000);
  }

  function toggleChat() {
    const card = document.getElementById("chatbot-card");
    const toggleBtn = document.getElementById("chat-toggle-button");

    const isOpen = card.style.display !== "none";
    card.style.display = isOpen ? "none" : "block";
    toggleBtn.style.display = isOpen ? "block" : "none";

    // Reset auto-close timer
    if (!isOpen) {
      clearTimeout(autoCloseTimer);
      autoCloseTimer = setTimeout(() => {
        card.style.display = "none";
        toggleBtn.style.display = "block";
      }, 300000);
    }

    if (!isOpen && botIndex === 0) {
      showNextBotMessage();
    }
  }

  function showNextBotMessage() {
    const chatBody = document.getElementById("chat-body");

    if (botIndex < botMessages.length) {
      setTimeout(() => {
        chatBody.innerHTML += `
          <div class="text-start mb-2">
            <span class="badge bg-secondary">${botMessages[botIndex++]}</span>
          </div>`;
        chatBody.scrollTop = chatBody.scrollHeight;
      }, 1000);
    } else {
      setTimeout(() => {
        chatBody.innerHTML += `
          <div class="text-start mb-2">
            <span class="badge bg-secondary">Thanks for your answers! I’ll calculate your budget. 📊</span>
          </div>`;
        chatBody.scrollTop = chatBody.scrollHeight;
      }, 1000);
    }
  }

  function sendMessage(event) {
    event.preventDefault();
    const input = document.getElementById("chat-input");
    const message = input.value.trim();
    if (!message) return;

    const chatBody = document.getElementById("chat-body");

    chatBody.innerHTML += `
      <div class="text-end mb-2">
        <span class="badge bg-primary">${message}</span>
      </div>`;
    input.value = "";
    chatBody.scrollTop = chatBody.scrollHeight;

    showNextBotMessage();
  }
</script>




         <script src="js/bootstrap.bundle.min.js"></script>
             </main>
          </body>
            </html>

            <section class="explore-section section-padding" id="section_2">
                <div class="container">
                    <div class="row">

                        <div class="col-12 text-center">
                            <h2 class="mb-4">Browse Topics</h1>
                        </div>

                    </div>
                </div>

                <div class="container">
                    <div class="row">

                        <div class="col-12">
                            <div class="tab-content" id="myTabContent">
                                <div class="tab-pane fade show active" id="design-tab-pane" role="tabpanel" aria-labelledby="design-tab" tabindex="0">
                                    <div class="row">
  <!-- Shopping History Box -->
  <div class="col-lg-4 col-md-8 col-12 mb-8">
    <div class="custom-block bg-white shadow-lg p-3">
 <h5 class="mb-3">🛍️ Shopping History</h5>
    <div id="shoppingHistoryBox" class="text-dark"></div>
    </div>
  </div>

  <!-- Utilities History Box -->
  <div class="col-lg-4 col-md-6 col-12 mb-8">
    <div class="custom-block bg-white shadow-lg p-3">
       <h5 class="mb-3">💡 Utilities History</h5>
    <div id="utilitiesHistoryBox" class="text-dark"></div>
    </div>
  </div>

  <!-- Travel History Box -->
  <div class="col-lg-4 col-md-6 col-12 mb-8">
    <div class="custom-block bg-white shadow-lg p-3">
         <h5 class="mb-3">✈️ Travel History</h5>
    <div id="travelHistoryBox" class="text-dark"></div>
    </div>
  </div>
</div>
                    </div>
                </div>
            </section>


            <section class="timeline-section section-padding" id="section_3">
                <div class="section-overlay"></div>

                <div class="container">
                    <div class="row">

                        <div class="col-12 text-center">
                            <h2 class="text-white mb-4">How does it work?</h1>
                        </div>

                        <div class="col-lg-10 col-12 mx-auto">
                            <div class="timeline-container">
                                <ul class="vertical-scrollable-timeline" id="vertical-scrollable-timeline">
                                    <div class="list-progress">
                                        <div class="inner"></div>
                                    </div>

                                    <li>
                                        <h4 class="text-white mb-3">Search your favourite topic</h4>

                                        <p class="text-white">Lorem ipsum dolor sit amet consectetur adipisicing elit. Reiciendis, cumque magnam? Sequi, cupiditate quibusdam alias illum sed esse ad dignissimos libero sunt, quisquam numquam aliquam? Voluptas, accusamus omnis?</p>

                                        <div class="icon-holder">
                                          <i class="bi-search"></i>
                                        </div>
                                    </li>
                                    
                                    <li>
                                        <h4 class="text-white mb-3">Bookmark &amp; Keep it for yourself</h4>

                                        <p class="text-white">Lorem ipsum dolor, sit amet consectetur adipisicing elit. Sint animi necessitatibus aperiam repudiandae nam omnis est vel quo, nihil repellat quia velit error modi earum similique odit labore. Doloremque, repudiandae?</p>

                                        <div class="icon-holder">
                                          <i class="bi-bookmark"></i>
                                        </div>
                                    </li>

                                    <li>
                                        <h4 class="text-white mb-3">Read &amp; Enjoy</h4>

                                        <p class="text-white">Lorem, ipsum dolor sit amet consectetur adipisicing elit. Animi vero quisquam, rem assumenda similique voluptas distinctio, iste est hic eveniet debitis ut ducimus beatae id? Quam culpa deleniti officiis autem?</p>

                                        <div class="icon-holder">
                                          <i class="bi-book"></i>
                                        </div>
                                    </li>
                                </ul>
                            </div>
                        </div>

                        <div class="col-12 text-center mt-5">
                            <p class="text-white">
                                Want to learn more?
                                <a href="#" class="btn custom-btn custom-border-btn ms-3">Check out Youtube</a>
                            </p>
                        </div>
                    </div>
                </div>
            </section>


            <section class="faq-section section-padding" id="section_4">
                <div class="container">
                    <div class="row">

                        <div class="col-lg-6 col-12">
                            <h2 class="mb-4">Frequently Asked Questions</h2>
                        </div>

                        <div class="clearfix"></div>

                        <div class="col-lg-5 col-12">
                            <img src="images/faq_graphic.jpg" class="img-fluid" alt="FAQs">
                        </div>

                        <div class="col-lg-6 col-12 m-auto">
                            <div class="accordion" id="accordionExample">
                                <div class="accordion-item">
                                    <h2 class="accordion-header" id="headingOne">
                                        <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
                                        What is Topic Listing?
                                        </button>
                                    </h2>

                                    <div id="collapseOne" class="accordion-collapse collapse show" aria-labelledby="headingOne" data-bs-parent="#accordionExample">
                                        <div class="accordion-body">
                                            Topic Listing is free Bootstrap 5 CSS template. <strong>You are not allowed to redistribute this template</strong> on any other template collection website without our permission. Please contact TemplateMo for more detail. Thank you.
                                        </div>
                                    </div>
                                </div>

                                <div class="accordion-item">
                                    <h2 class="accordion-header" id="headingTwo">
                                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
                                        How to find a topic?
                                    </button>
                                    </h2>

                                    <div id="collapseTwo" class="accordion-collapse collapse" aria-labelledby="headingTwo" data-bs-parent="#accordionExample">
                                        <div class="accordion-body">
                                            You can search on Google with <strong>keywords</strong> such as templatemo portfolio, templatemo one-page layouts, photography, digital marketing, etc.
                                        </div>
                                    </div>
                                </div>

                                <div class="accordion-item">
                                    <h2 class="accordion-header" id="headingThree">
                                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
                                        Does it need to paid?
                                    </button>
                                    </h2>

                                    <div id="collapseThree" class="accordion-collapse collapse" aria-labelledby="headingThree" data-bs-parent="#accordionExample">
                                        <div class="accordion-body">
                                            You can modify any of this with custom CSS or overriding our default variables. It's also worth noting that just about any HTML can go within the <code>.accordion-body</code>, though the transition does limit overflow.
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
            </section>


            <section class="contact-section section-padding section-bg" id="section_5">
                <div class="container">
                    <div class="row">

                        <div class="col-lg-12 col-12 text-center">
                            <h2 class="mb-5">Get in touch</h2>
                        </div>

                        <div class="col-lg-5 col-12 mb-4 mb-lg-0">
                            <iframe class="google-map" src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d2595.065641062665!2d-122.4230416990949!3d37.80335401520422!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x80858127459fabad%3A0x808ba520e5e9edb7!2sFrancisco%20Park!5e1!3m2!1sen!2sth!4v1684340239744!5m2!1sen!2sth" width="100%" height="250" style="border:0;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
                        </div>

                        <div class="col-lg-3 col-md-6 col-12 mb-3 mb-lg- mb-md-0 ms-auto">
                            <h4 class="mb-3">Head office</h4>

                            <p>Bay St &amp;, Larkin St, San Francisco, CA 94109, United States</p>

                            <hr>

                            <p class="d-flex align-items-center mb-1">
                                <span class="me-2">Phone</span>

                                <a href="tel: 305-240-9671" class="site-footer-link">
                                    305-240-9671
                                </a>
                            </p>

                            <p class="d-flex align-items-center">
                                <span class="me-2">Email</span>

                                <a href="mailto:info@company.com" class="site-footer-link">
                                    info@company.com
                                </a>
                            </p>
                        </div>

                        <div class="col-lg-3 col-md-6 col-12 mx-auto">
                            <h4 class="mb-3">Dubai office</h4>

                            <p>Burj Park, Downtown Dubai, United Arab Emirates</p>

                            <hr>

                            <p class="d-flex align-items-center mb-1">
                                <span class="me-2">Phone</span>

                                <a href="tel: 110-220-3400" class="site-footer-link">
                                    110-220-3400
                                </a>
                            </p>

                            <p class="d-flex align-items-center">
                                <span class="me-2">Email</span>

                                <a href="mailto:info@company.com" class="site-footer-link">
                                    info@company.com
                                </a>
                            </p>
                        </div>

                    </div>
                </div>
            </section>
        </main>

<footer class="site-footer section-padding">
            <div class="container">
                <div class="row">

                    <div class="col-lg-3 col-12 mb-4 pb-2">
                        <a class="navbar-brand mb-2" href="index.html">
                                  <img src="images/logo-transparent-png.png" alt="Budget Buddy Logo" height="150" width="120">
                        </a>
                    </div>

                    <div class="col-lg-3 col-md-4 col-6">
                        <h6 class="site-footer-title mb-3">Resources</h6>

                        <ul class="site-footer-links">
                            <li class="site-footer-link-item">
                                <a href="#" class="site-footer-link">Home</a>
                            </li>

                            <li class="site-footer-link-item">
                                <a href="#" class="site-footer-link">How it works</a>
                            </li>

                            <li class="site-footer-link-item">
                                <a href="#" class="site-footer-link">FAQs</a>
                            </li>

                            <li class="site-footer-link-item">
                                <a href="#" class="site-footer-link">Contact</a>
                            </li>
                        </ul>
                    </div>

                    <div class="col-lg-3 col-md-4 col-6 mb-4 mb-lg-0">
                        <h6 class="site-footer-title mb-3">Information</h6>

                        <p class="text-white d-flex mb-1">
                            <a href="tel: 305-240-9671" class="site-footer-link">
                                305-240-9671
                            </a>
                        </p>

                        <p class="text-white d-flex">
                            <a href="mailto:info@company.com" class="site-footer-link">
                                info@company.com
                            </a>
                        </p>
                    </div>

                </div>
            </div>
        </footer>


<script>
  async function fetchCategoryHistory(category, targetElementId) {
    try {
      const response = await fetch(`http://localhost:5005/api/dashboard/category/${category}`);
      if (!response.ok) throw new Error("Failed to fetch");
      const data = await response.json();

      const container = document.getElementById(targetElementId);
      let index = 0;

      function showNext() {
        if (data.length === 0) {
          container.innerHTML = "No history available.";
          return;
        }

        // Clear previous data
        container.innerHTML = '';

        const item = data[index];
        const div = document.createElement('div');
        div.className = "border p-2 rounded shadow-sm";
        div.innerHTML = `
          <strong>${index + 1}. ${item.cardHolder}</strong><br>
          💳 ${item.cardNumber}<br>
          📝 ${item.notes}<br>
          📍 ${item.address || "N/A"}<br>
          📅 ${new Date(item.paymentDate).toLocaleDateString()}
        `;
        container.appendChild(div);

        index = (index + 1) % data.length; // loop back
        setTimeout(showNext, 2000); // Show next in 2 seconds
      }

      showNext();
    } catch (err) {
      document.getElementById(targetElementId).innerText = "⚠️ Error loading " + category + " history.";
      console.error("❌ Error:", err);
    }
  }

  // On page load
  document.addEventListener("DOMContentLoaded", () => {
    fetchCategoryHistory("Shopping", "shoppingHistoryBox");
    fetchCategoryHistory("Utilities", "utilitiesHistoryBox");
    fetchCategoryHistory("Travel", "travelHistoryBox");
  });
</script>





        <!-- JAVASCRIPT FILES -->
        <script src="js/jquery.min.js"></script>
        <script src="js/bootstrap.bundle.min.js"></script>
        <script src="js/jquery.sticky.js"></script>
        <script src="js/click-scroll.js"></script>
        <script src="js/custom.js"></script>

    </body>
</html>
